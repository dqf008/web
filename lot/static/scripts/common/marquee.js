define(["jquery"],function(t){return function(t){t.fn.marquee=function(i){function a(t,i,a){var e=a.behavior,s=a.width,r=a.dir,d=0;return d="alternate"==e?1==t?i[a.widthAxis]-2*s:s:"slide"==e?t==-1?r==-1?i[a.widthAxis]:s:r==-1?i[a.widthAxis]-2*s:0:t==-1?i[a.widthAxis]:0}function e(){for(var i=r.length,d=null,l=null,o={},n=[],h=!1;i--;)d=r[i],l=t(d),o=l.data("marqueeState"),l.data("paused")!==!0?(d[o.axis]+=o.scrollamount*o.dir,h=o.dir==-1?d[o.axis]<=a(o.dir*-1,d,o):d[o.axis]>=a(o.dir*-1,d,o),"scroll"==o.behavior&&o.last==d[o.axis]||"alternate"==o.behavior&&h&&o.last!=-1||"slide"==o.behavior&&h&&o.last!=-1?("alternate"==o.behavior&&(o.dir*=-1),o.last=-1,l.trigger("stop"),o.loops--,0===o.loops?("slide"!=o.behavior?d[o.axis]=a(o.dir,d,o):d[o.axis]=a(o.dir*-1,d,o),l.trigger("end")):(n.push(d),l.trigger("start"),d[o.axis]=a(o.dir,d,o))):n.push(d),o.last=d[o.axis],l.data("marqueeState",o)):n.push(d);r=n,r.length&&setTimeout(e,s.speed)}var s={kclass:"",speed:30};t.extend(s,i);var r=[],d=this.length;return this.each(function(i){var l=t(this),o=l.attr("width")||l.width(),n=l.attr("height")||l.height(),h=l.after("<div "+(s.kclass?'class="'+s.kclass+'" ':"")+'style=" width: '+o+"px; height: "+n+'px; overflow: hidden;"><div style="float: left;">'+l.html()+"</div></div>").next(),u=h.get(0),p=(l.attr("direction")||"left").toLowerCase(),c={dir:/down|right/.test(p)?-1:1,axis:/left|right/.test(p)?"scrollLeft":"scrollTop",widthAxis:/left|right/.test(p)?"scrollWidth":"scrollHeight",last:-1,loops:l.attr("loop")||-1,scrollamount:l.attr("scrollamount")||this.scrollAmount||2,behavior:(l.attr("behavior")||"scroll").toLowerCase(),width:/left|right/.test(p)?o:n};l.attr("loop")==-1&&"slide"==c.behavior&&(c.loops=1),l.remove(),/left|right/.test(p)?h.find("> div").css({padding:"0 "+o+"px","white-space":"nowrap"}):h.find("> div").css({padding:n+"px 0"}),h.bind("stop",function(){h.data("paused",!0)}).bind("pause",function(){h.data("paused",!0)}).bind("start",function(){h.data("paused",!1)}).bind("unpause",function(){h.data("paused",!1)}).data("marqueeState",c),r.push(u),u[c.axis]=a(c.dir,u,c),h.trigger("start"),i+1==d&&e()}),t(r)}}(t),t});