define(["jquery","dialog"],function(e,t){function n(e,t){var n;if(null==e||"--"==e||0==e.length)return"--";"/Date"==e.substring(0,5)?(e=e.replace("/Date(","").replace(")/",""),e.indexOf("+")>0?e=e.substring(0,e.indexOf("+")):e.indexOf("-")>0&&(e=e.substring(0,e.indexOf("-"))),n=new Date(parseInt(e,10))):n=new Date(e);var r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,o=n.getDate()<10?"0"+n.getDate():n.getDate(),a=n.getHours()+t-8;a=a<10?"0"+a:a;var i=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),u=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return n.getFullYear()+"-"+r+"-"+o+" "+a+":"+i+":"+u}var r={};return r.format=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,n){return"undefined"!=typeof t[n]?t[n]:e})},r.dateFormat=function(e,t){return n(e,parseInt(t))},r.padleft=function(e,t){t=(t||8)-e.toString().length;for(var n="",r=0;r<t;r++)n+="0";return n+e},r.combination=function(e,t){var n=[];return function e(t,r,o){if(0==o)return n.push(t);for(var a=0,i=r.length;a<=i-o;a++)e(t.concat(r[a]),r.slice(a+1),o-1)}([],e,t),n},r.ajax=function(n,r){var o={beforeSend:function(){t.loading.show(r)},complete:function(){t.loading.hide()}},a={type:"POST",contentType:"application/json",error:function(e){888==e.status&&(t.error(e.responseText),setTimeout(function(){location.href=e.getResponseHeader("Location")},2500))}};r&&(a=e.extend(!0,a,o));var i=e.extend(!0,a,n);return e.ajax(i)},r.secondsFormat=function(e,t){var n=Math.floor(parseInt(e/3600)/24),r=parseInt(e/3600)%24,o=parseInt(e/60)%60,a=e%60;return t?(r&&(o+=60*r),(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)):{days:n,hours:r<10?"0"+r:r,minutes:o<10?"0"+o:o,seconds:a<10?"0"+a:a}},r});