(function(){var t=this,e=t._,n=Array.prototype,r=Object.prototype,i=Function.prototype,o=n.push,s=n.slice,a=n.concat,u=r.toString,c=r.hasOwnProperty,l=Array.isArray,f=Object.keys,h=i.bind,d=function(t){return t instanceof d?t:this instanceof d?void (this._wrapped=t):new d(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports._=d):t._=d,d.VERSION="1.7.0";var p=function(t,e,n){if(void 0===e){return t}switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}};d.iteratee=function(t,e,n){return null==t?d.identity:d.isFunction(t)?p(t,e,n):d.isObject(t)?d.matches(t):d.property(t)},d.each=d.forEach=function(t,e,n){if(null==t){return t}e=p(e,n);var r,i=t.length;if(i===+i){for(r=0;r<i;r++){e(t[r],r,t)}}else{var o=d.keys(t);for(r=0,i=o.length;r<i;r++){e(t[o[r]],o[r],t)}}return t},d.map=d.collect=function(t,e,n){if(null==t){return[]}e=d.iteratee(e,n);for(var r,i=t.length!==+t.length&&d.keys(t),o=(i||t).length,s=Array(o),a=0;a<o;a++){r=i?i[a]:a,s[a]=e(t[r],r,t)}return s};var m="Reduce of empty array with no initial value";d.reduce=d.foldl=d.inject=function(t,e,n,r){null==t&&(t=[]),e=p(e,r,4);var i,o=t.length!==+t.length&&d.keys(t),s=(o||t).length,a=0;if(arguments.length<3){if(!s){throw new TypeError(m)}n=t[o?o[a++]:a++]}for(;a<s;a++){i=o?o[a]:a,n=e(n,t[i],i,t)}return n},d.reduceRight=d.foldr=function(t,e,n,r){null==t&&(t=[]),e=p(e,r,4);var i,o=t.length!==+t.length&&d.keys(t),s=(o||t).length;if(arguments.length<3){if(!s){throw new TypeError(m)}n=t[o?o[--s]:--s]}for(;s--;){i=o?o[s]:s,n=e(n,t[i],i,t)}return n},d.find=d.detect=function(t,e,n){var r;return e=d.iteratee(e,n),d.some(t,function(t,n,i){if(e(t,n,i)){return r=t,!0}}),r},d.filter=d.select=function(t,e,n){var r=[];return null==t?r:(e=d.iteratee(e,n),d.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r)},d.reject=function(t,e,n){return d.filter(t,d.negate(d.iteratee(e)),n)},d.every=d.all=function(t,e,n){if(null==t){return !0}e=d.iteratee(e,n);var r,i,o=t.length!==+t.length&&d.keys(t),s=(o||t).length;for(r=0;r<s;r++){if(i=o?o[r]:r,!e(t[i],i,t)){return !1}}return !0},d.some=d.any=function(t,e,n){if(null==t){return !1}e=d.iteratee(e,n);var r,i,o=t.length!==+t.length&&d.keys(t),s=(o||t).length;for(r=0;r<s;r++){if(i=o?o[r]:r,e(t[i],i,t)){return !0}}return !1},d.contains=d.include=function(t,e){return null!=t&&(t.length!==+t.length&&(t=d.values(t)),d.indexOf(t,e)>=0)},d.invoke=function(t,e){var n=s.call(arguments,2),r=d.isFunction(e);return d.map(t,function(t){return(r?e:t[e]).apply(t,n)})},d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matches(e))},d.findWhere=function(t,e){return d.find(t,d.matches(e))},d.max=function(t,e,n){var r,i,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=t.length===+t.length?t:d.values(t);for(var a=0,u=t.length;a<u;a++){r=t[a],r>o&&(o=r)}}else{e=d.iteratee(e,n),d.each(t,function(t,n,r){i=e(t,n,r),(i>s||i===-(1/0)&&o===-(1/0))&&(o=t,s=i)})}return o},d.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:d.values(t);for(var a=0,u=t.length;a<u;a++){r=t[a],r<o&&(o=r)}}else{e=d.iteratee(e,n),d.each(t,function(t,n,r){i=e(t,n,r),(i<s||i===1/0&&o===1/0)&&(o=t,s=i)})}return o},d.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:d.values(t),r=n.length,i=Array(r),o=0;o<r;o++){e=d.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o]}return i},d.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=d.values(t)),t[d.random(t.length-1)]):d.shuffle(t).slice(0,Math.max(0,e))},d.sortBy=function(t,e,n){return e=d.iteratee(e,n),d.pluck(d.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n){return 1}if(n<r||void 0===r){return -1}}return t.index-e.index}),"value")};var g=function(t){return function(e,n,r){var i={};return n=d.iteratee(n,r),d.each(e,function(r,o){var s=n(r,o,e);t(i,r,s)}),i}};d.groupBy=g(function(t,e,n){d.has(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=g(function(t,e,n){t[n]=e}),d.countBy=g(function(t,e,n){d.has(t,n)?t[n]++:t[n]=1}),d.sortedIndex=function(t,e,n,r){n=d.iteratee(n,r,1);for(var i=n(e),o=0,s=t.length;o<s;){var a=o+s>>>1;n(t[a])<i?o=a+1:s=a}return o},d.toArray=function(t){return t?d.isArray(t)?s.call(t):t.length===+t.length?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:t.length===+t.length?t.length:d.keys(t).length},d.partition=function(t,e,n){e=d.iteratee(e,n);var r=[],i=[];return d.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},d.first=d.head=d.take=function(t,e,n){if(null!=t){return null==e||n?t[0]:e<0?[]:s.call(t,0,e)}},d.initial=function(t,e,n){return s.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){if(null!=t){return null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))}},d.rest=d.tail=d.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,d.identity)};var v=function(t,e,n,r){if(e&&d.every(t,d.isArray)){return a.apply(r,t)}for(var i=0,s=t.length;i<s;i++){var u=t[i];d.isArray(u)||d.isArguments(u)?e?o.apply(r,u):v(u,e,n,r):n||r.push(u)}return r};d.flatten=function(t,e){return v(t,e,!1,[])},d.without=function(t){return d.difference(t,s.call(arguments,1))},d.uniq=d.unique=function(t,e,n,r){if(null==t){return[]}d.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=d.iteratee(n,r));for(var i=[],o=[],s=0,a=t.length;s<a;s++){var u=t[s];if(e){s&&o===u||i.push(u),o=u}else{if(n){var c=n(u,s,t);d.indexOf(o,c)<0&&(o.push(c),i.push(u))}else{d.indexOf(i,u)<0&&i.push(u)}}}return i},d.union=function(){return d.uniq(v(arguments,!0,!0,[]))},d.intersection=function(t){if(null==t){return[]}for(var e=[],n=arguments.length,r=0,i=t.length;r<i;r++){var o=t[r];if(!d.contains(e,o)){for(var s=1;s<n&&d.contains(arguments[s],o);s++){}s===n&&e.push(o)}}return e},d.difference=function(t){var e=v(s.call(arguments,1),!0,!0,[]);return d.filter(t,function(t){return !d.contains(e,t)})},d.zip=function(t){if(null==t){return[]}for(var e=d.max(arguments,"length").length,n=Array(e),r=0;r<e;r++){n[r]=d.pluck(arguments,r)}return n},d.object=function(t,e){if(null==t){return{}}for(var n={},r=0,i=t.length;r<i;r++){e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1]}return n},d.indexOf=function(t,e,n){if(null==t){return -1}var r=0,i=t.length;if(n){if("number"!=typeof n){return r=d.sortedIndex(t,e),t[r]===e?r:-1}r=n<0?Math.max(0,i+n):n}for(;r<i;r++){if(t[r]===e){return r}}return -1},d.lastIndexOf=function(t,e,n){if(null==t){return -1}var r=t.length;for("number"==typeof n&&(r=n<0?r+n+1:Math.min(r,n+1));--r>=0;){if(t[r]===e){return r}}return -1},d.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n){i[o]=t}return i};var y=function(){};d.bind=function(t,e){var n,r;if(h&&t.bind===h){return h.apply(t,s.call(arguments,1))}if(!d.isFunction(t)){throw new TypeError("Bind must be called on a function")}return n=s.call(arguments,2),r=function(){if(!(this instanceof r)){return t.apply(e,n.concat(s.call(arguments)))}y.prototype=t.prototype;var i=new y();y.prototype=null;var o=t.apply(i,n.concat(s.call(arguments)));return d.isObject(o)?o:i}},d.partial=function(t){var e=s.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,o=r.length;i<o;i++){r[i]===d&&(r[i]=arguments[n++])}for(;n<arguments.length;){r.push(arguments[n++])}return t.apply(this,r)}},d.bindAll=function(t){var e,n,r=arguments.length;if(r<=1){throw new Error("bindAll must be passed function names")}for(e=1;e<r;e++){n=arguments[e],t[n]=d.bind(t[n],t)}return t},d.memoize=function(t,e){var n=function(r){var i=n.cache,o=e?e.apply(this,arguments):r;return d.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},d.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},d.defer=function(t){return d.delay.apply(d,[t,1].concat(s.call(arguments,1)))},d.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:d.now(),s=null,o=t.apply(r,i),s||(r=i=null)};return function(){var c=d.now();a||n.leading!==!1||(a=c);var l=e-(c-a);return r=this,i=arguments,l<=0||l>e?(clearTimeout(s),s=null,a=c,o=t.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(u,l)),o}},d.debounce=function(t,e,n){var r,i,o,s,a,u=function(){var c=d.now()-s;c<e&&c>0?r=setTimeout(u,e-c):(r=null,n||(a=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=d.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(a=t.apply(o,i),o=i=null),a}},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return !t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;){r=t[n].call(this,r)}return r}},d.after=function(t,e){return function(){if(--t<1){return e.apply(this,arguments)}}},d.before=function(t,e){var n;return function(){return --t>0?n=e.apply(this,arguments):e=null,n}},d.once=d.partial(d.before,2),d.keys=function(t){if(!d.isObject(t)){return[]}if(f){return f(t)}var e=[];for(var n in t){d.has(t,n)&&e.push(n)}return e},d.values=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),i=0;i<n;i++){r[i]=t[e[i]]}return r},d.pairs=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),i=0;i<n;i++){r[i]=[e[i],t[e[i]]]}return r},d.invert=function(t){for(var e={},n=d.keys(t),r=0,i=n.length;r<i;r++){e[t[n[r]]]=n[r]}return e},d.functions=d.methods=function(t){var e=[];for(var n in t){d.isFunction(t[n])&&e.push(n)}return e.sort()},d.extend=function(t){if(!d.isObject(t)){return t}for(var e,n,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(n in e){c.call(e,n)&&(t[n]=e[n])}}return t},d.pick=function(t,e,n){var r,i={};if(null==t){return i}if(d.isFunction(e)){e=p(e,n);for(r in t){var o=t[r];e(o,r,t)&&(i[r]=o)}}else{var u=a.apply([],s.call(arguments,1));t=new Object(t);for(var c=0,l=u.length;c<l;c++){r=u[c],r in t&&(i[r]=t[r])}}return i},d.omit=function(t,e,n){if(d.isFunction(e)){e=d.negate(e)}else{var r=d.map(a.apply([],s.call(arguments,1)),String);e=function(t,e){return !d.contains(r,e)}}return d.pick(t,e,n)},d.defaults=function(t){if(!d.isObject(t)){return t}for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];for(var i in r){void 0===t[i]&&(t[i]=r[i])}}return t},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t};var b=function(t,e,n,r){if(t===e){return 0!==t||1/t===1/e}if(null==t||null==e){return t===e}t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var i=u.call(t);if(i!==u.call(e)){return !1}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return +t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return +t===+e}if("object"!=typeof t||"object"!=typeof e){return !1}for(var o=n.length;o--;){if(n[o]===t){return r[o]===e}}var s=t.constructor,a=e.constructor;if(s!==a&&"constructor" in t&&"constructor" in e&&!(d.isFunction(s)&&s instanceof s&&d.isFunction(a)&&a instanceof a)){return !1}n.push(t),r.push(e);var c,l;if("[object Array]"===i){if(c=t.length,l=c===e.length){for(;c--&&(l=b(t[c],e[c],n,r));){}}}else{var f,h=d.keys(t);if(c=h.length,l=d.keys(e).length===c){for(;c--&&(f=h[c],l=d.has(e,f)&&b(t[f],e[f],n,r));){}}}return n.pop(),r.pop(),l};d.isEqual=function(t,e){return b(t,e,[],[])},d.isEmpty=function(t){if(null==t){return !0}if(d.isArray(t)||d.isString(t)||d.isArguments(t)){return 0===t.length}for(var e in t){if(d.has(t,e)){return !1}}return !0},d.isElement=function(t){return !(!t||1!==t.nodeType)},d.isArray=l||function(t){return"[object Array]"===u.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){d["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return d.has(t,"callee")}),"function"!=typeof/ . /&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&t!==+t},d.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===u.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){return null!=t&&c.call(t,e)},d.noConflict=function(){return t._=e,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(t){return function(e){return e[t]}},d.matches=function(t){var e=d.pairs(t),n=e.length;return function(t){if(null==t){return !n}t=new Object(t);for(var r=0;r<n;r++){var i=e[r],o=i[0];if(i[1]!==t[o]||!(o in t)){return !1}}return !0}},d.times=function(t,e,n){var r=Array(Math.max(0,t));e=p(e,n,1);for(var i=0;i<t;i++){r[i]=e(i)}return r},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return new Date().getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=d.invert(_),x=function(t){var e=function(e){return t[e]},n="(?:"+d.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};d.escape=x(_),d.unescape=x(w),d.result=function(t,e){if(null!=t){var n=t[e];return d.isFunction(n)?t[e]():n}};var k=0;d.uniqueId=function(t){var e=++k+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(t){return"\\"+j[t]};d.template=function(t,e,n){!e&&n&&(e=n),e=d.defaults({},e,d.templateSettings);var r=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,s,a){return o+=t.slice(i,a).replace(N,O),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var a=function(t){return s.call(this,t,d)},u=e.variable||"obj";return a.source="function("+u+"){\n"+o+"}",a},d.chain=function(t){var e=d(t);return e._chain=!0,e};var E=function(t){return this._chain?d(t).chain():t};d.mixin=function(t){d.each(d.functions(t),function(e){var n=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),E.call(this,n.apply(d,t))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];d.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],E.call(this,n)}}),d.each(["concat","join","slice"],function(t){var e=n[t];d.prototype[t]=function(){return E.call(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}).call(this),define("dialog",["jquery"],function(t){function e(e,n,r,i){n=n||3000,"string"===t.type(n)&&(r=n,n=3000);var o=s({id:"d-msg",skin:"ui-msg "+r,content:e});setTimeout(function(){o.remove()},n);return o.show(),o}var n=function(t){function e(){this.destroyed=!1,this.__popup=t("<div />").attr({tabindex:"-1"}).css({display:"none",position:"absolute",outline:0}).html(this.innerHTML).appendTo("body"),this.__backdrop=t("<div />"),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],n++}var n=0,r=!("minWidth" in t("html")[0].style),i=!r;return t.extend(e.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",backdropBackground:"#fff",backdropOpacity:0,innerHTML:"",className:"ui-popup",show:function(e){if(this.destroyed){return this}var n=this,i=this.__popup;return this.__activeElement=this.__getActive(),this.open=!0,this.follow=e||this.follow,this.__ready||(i.addClass(this.className),this.modal&&this.__lock(),i.html()||i.html(this.innerHTML),r||t(window).on("resize",this.__onresize=function(){n.reset()}),this.__ready=!0),i.addClass(this.className+"-show").attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute").show(),this.__backdrop.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(t){return !this.destroyed&&this.open&&(void 0!==t&&(this.returnValue=t),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed){return this}this.__dispatchEvent("beforeremove"),e.current===this&&(e.current=null),this.__unlock(),this.__popup.remove(),this.__backdrop.remove(),r||t(window).off("resize",this.__onresize),this.__dispatchEvent("remove");for(var n in this){delete this[n]}return this},reset:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("reset"),this},focus:function(){var n=this.node,r=e.current;if(r&&r!==this&&r.blur(!1),!t.contains(n,this.__getActive())){var i=this.__popup.find("[autofocus]")[0];!this._autofocus&&i?this._autofocus=!0:i=n,this.__focus(i)}return e.current=this,this.__popup.addClass(this.className+"-focus"),this.__zIndex(),this.__dispatchEvent("focus"),this},blur:function(){var t=this.__activeElement,e=arguments[0];return e!==!1&&this.__focus(t),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(t,e){return this.__getEventListener(t).push(e),this},removeEventListener:function(t,e){for(var n=this.__getEventListener(t),r=0;r<n.length;r++){e===n[r]&&n.splice(r--,1)}return this},__getEventListener:function(t){var e=this.__listener;return e||(e=this.__listener={}),e[t]||(e[t]=[]),e[t]},__dispatchEvent:function(t){var e=this.__getEventListener(t);this["on"+t]&&this["on"+t]();for(var n=0;n<e.length;n++){e[n].call(this)}},__focus:function(t){try{this.autofocus&&!/^iframe$/i.test(t.nodeName)&&t.focus()}catch(t){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,n=e&&e.activeElement||t;return n}catch(t){}},__zIndex:function(){var t=e.zIndex++;this.__popup.css("zIndex",t),this.__backdrop.css("zIndex",t-1),this.zIndex=t},__center:function(){var e=this.__popup,n=t(window),r=t(document),i=this.fixed,o=i?0:r.scrollLeft(),s=i?0:r.scrollTop(),a=n.width(),u=n.height(),c=e.width(),l=e.height(),f=(a-c)/2+o,h=382*(u-l)/1000+s,d=e[0].style;d.left=Math.max(parseInt(f),o)+"px",d.top=Math.max(parseInt(h),s)+"px"},__follow:function(e){var n=e.parentNode&&t(e),r=this.__popup;if(this.__followSkin&&r.removeClass(this.__followSkin),n){var i=n.offset();if(i.left*i.top<0){return this.__center()}}var o=this,s=this.fixed,a=t(window),u=t(document),c=a.width(),l=a.height(),f=u.scrollLeft(),h=u.scrollTop(),d=r.width(),p=r.height(),m=n?n.outerWidth():0,g=n?n.outerHeight():0,v=this.__offset(e),y=v.left,b=v.top,_=s?y-f:y,w=s?b-h:b,x=s?0:f,k=s?0:h,I=x+c-d,j=k+l-p,N={},O=this.align.split(" "),E=this.className+"-",A={top:"bottom",bottom:"top",left:"right",right:"left"},S={top:"top",bottom:"top",left:"left",right:"left"},C=[{top:w-p,bottom:w+g,left:_-d,right:_+m},{top:w,bottom:w-p+g,left:_,right:_-d+m}],M={left:_+m/2-d/2,top:w+g/2-p/2},T={left:[x,I],top:[k,j]};t.each(O,function(t,e){C[t][e]>T[S[e]][1]&&(e=O[t]=A[e]),C[t][e]<T[S[e]][0]&&(O[t]=A[e])}),O[1]||(S[O[1]]="left"===S[O[0]]?"top":"left",C[1][O[1]]=M[S[O[1]]]),E+=O.join("-")+" "+this.className+"-follow",o.__followSkin=E,n&&r.addClass(E),N[S[O[0]]]=parseInt(C[0][O[0]]),N[S[O[1]]]=parseInt(C[1][O[1]]),r.css(N)},__offset:function(e){var n=e.parentNode,r=n?t(e).offset():{left:e.pageX,top:e.pageY};e=n?e:e.target;var i=e.ownerDocument,o=i.defaultView||i.parentWindow;if(o==window){return r}var s=o.frameElement,a=t(i),u=a.scrollLeft(),c=a.scrollTop(),l=t(s).offset(),f=l.left,h=l.top;return{left:r.left+f-u,top:r.top+h-c}},__lock:function(){var n=this,r=this.__popup,o=this.__backdrop,s={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",opacity:0,background:this.backdropBackground};r.addClass(this.className+"-modal"),e.zIndex=e.zIndex+2,this.__zIndex(),i||t.extend(s,{position:"absolute",width:t(window).width()+"px",height:t(document).height()+"px"}),o.css(s).animate({opacity:this.backdropOpacity},150).insertAfter(r).attr({tabindex:"0"}).on("focus",function(){n.focus()})},__unlock:function(){this.modal&&(this.__popup.removeClass(this.className+"-modal"),this.__backdrop.remove(),delete this.modal)}}),e.zIndex=1024,e.current=null,e}(t),r=function(t){return{content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"./index.css",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><button i="close" class="ui-dialog-close">&#215;</button><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div><div i="button" class="ui-dialog-button"></div></td></tr></table></div>'}}(t),i=function(t){var e=0,i=new Date()-0,o=!("minWidth" in t("html")[0].style),s="createTouch" in document&&!("onmousemove" in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),a=!o&&!s,u=function(n,r,o){var c=n=n||{};"string"!=typeof n&&1!==n.nodeType||(n={content:n,fixed:!s}),n=t.extend(!0,{},u.defaults,n),n._=c;var l=n.id=n.id||i+e,f=u.get(l);return f?f.focus():(a||(n.fixed=!1),n.quickClose&&(n.modal=!0,c.backdropOpacity||(n.backdropOpacity=0)),t.isArray(n.button)||(n.button=[]),void 0!==o&&(n.cancel=o),n.cancel&&n.button.push({id:"cancel",value:n.cancelValue,callback:n.cancel,display:n.cancelDisplay}),void 0!==r&&(n.ok=r),n.ok&&n.button.push({id:"ok",value:n.okValue,callback:n.ok,autofocus:!0}),u.list[l]=new u.create(n))},c=function(){};c.prototype=n.prototype;var l=u.prototype=new c();return u.create=function(r){var i=this;t.extend(this,new n());var o=t(this.node).html(r.innerHTML);return this.options=r,this._popup=o,t.each(r,function(t,e){"function"==typeof i[t]?i[t](e):i[t]=e}),r.zIndex&&(n.zIndex=r.zIndex),o.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").attr("title",this.cancelValue).on("click",function(t){i._trigger("cancel"),t.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),o.on("click","[data-id]",function(e){var n=t(this);n.attr("disabled")||i._trigger(n.data("id")),e.preventDefault()}),r.quickClose&&t(this.backdrop).on("onmousedown" in document?"mousedown":"click",function(){return i._trigger("cancel"),!1}),this._esc=function(t){var e=t.target,r=e.nodeName,o=/^input|textarea$/i,s=n.current===i,a=t.keyCode;!s||o.test(r)&&"button"!==e.type||27===a&&i._trigger("cancel")},t(document).on("keydown",this._esc),this.addEventListener("remove",function(){t(document).off("keydown",this._esc),delete u.list[this.id]}),e++,u.oncreate(this),this},u.create.prototype=l,t.extend(l,{content:function(t){return this._$("content").empty("")["object"==typeof t?"append":"html"](t),this.reset()},title:function(t){return this._$("title").text(t),this._$("header")[t?"show":"hide"](),this},width:function(t){return this._$("content").css("width",t),this.reset()},height:function(t){return this._$("content").css("height",t),this.reset()},button:function(e){e=e||[];var n=this,r="",i=0;return this.callbacks={},"string"==typeof e?r=e:t.each(e,function(t,e){e.id=e.id||e.value,n.callbacks[e.id]=e.callback;var o="";e.display===!1?o=' style="display:none"':i++,r+='<button type="button" data-id="'+e.id+'"'+o+(e.disabled?" disabled":"")+(e.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+e.value+"</button>"}),this._$("footer")[i?"show":"hide"](),this._$("button").html(r),this},statusbar:function(t){return this._$("statusbar").html(t)[t?"show":"hide"](),this},_$:function(t){return this._popup.find("[i="+t+"]")},_trigger:function(t){var e=this.callbacks[t];return"function"!=typeof e||e.call(this)!==!1?this.close().remove():this}}),u.oncreate=t.noop,u.getCurrent=function(){return n.current},u.get=function(t){return void 0===t?u.list:u.list[t]},u.list={},u.defaults=r,u}(t),o=function(t){var e=t(window),n=t(document),r="createTouch" in document,i=document.documentElement,o=!("minWidth" in i.style),s=!o&&"onlosecapture" in i,a="setCapture" in i,u={start:r?"touchstart":"mousedown",over:r?"touchmove":"mousemove",end:r?"touchend":"mouseup"},c=r?function(t){return t.touches||(t=t.originalEvent.touches.item(0)),t}:function(t){return t},l=function(){this.start=t.proxy(this.start,this),this.over=t.proxy(this.over,this),this.end=t.proxy(this.end,this),this.onstart=this.onover=this.onend=t.noop};return l.types=u,l.prototype={start:function(t){return t=this.startFix(t),n.on(u.over,this.over).on(u.end,this.end),this.onstart(t),!1},over:function(t){return t=this.overFix(t),this.onover(t),!1},end:function(t){return t=this.endFix(t),n.off(u.over,this.over).off(u.end,this.end),this.onend(t),!1},startFix:function(r){return r=c(r),this.target=t(r.target),this.selectstart=function(){return !1},n.on("selectstart",this.selectstart).on("dblclick",this.end),s?this.target.on("losecapture",this.end):e.on("blur",this.end),a&&this.target[0].setCapture(),r},overFix:function(t){return t=c(t)},endFix:function(t){return t=c(t),n.off("selectstart",this.selectstart).off("dblclick",this.end),s?this.target.off("losecapture",this.end):e.off("blur",this.end),a&&this.target[0].releaseCapture(),t}},l.create=function(r,i){var o,s,a,u,c=t(r),f=new l(),h=l.types.start,d=function(){},p=r.className.replace(/^\s|\s.*/g,"")+"-drag-start",m={onstart:d,onover:d,onend:d,off:function(){c.off(h,f.start)}};return f.onstart=function(t){var i="fixed"===c.css("position"),l=n.scrollLeft(),f=n.scrollTop(),h=c.width(),d=c.height();o=0,s=0,a=i?e.width()-h+o:n.width()-h,u=i?e.height()-d+s:n.height()-d;var g=c.offset(),v=this.startLeft=i?g.left-l:g.left,y=this.startTop=i?g.top-f:g.top;this.clientX=t.clientX,this.clientY=t.clientY,c.addClass(p),m.onstart.call(r,t,v,y)},f.onover=function(t){var e=t.clientX-this.clientX+this.startLeft,n=t.clientY-this.clientY+this.startTop,i=c[0].style;e=Math.max(o,Math.min(a,e)),n=Math.max(s,Math.min(u,n)),i.left=e+"px",i.top=n+"px",m.onover.call(r,t,e,n)},f.onend=function(t){var e=c.position(),n=e.left,i=e.top;c.removeClass(p),m.onend.call(r,t,n,i)},f.off=function(){c.off(h,f.start)},i?f.start(i):c.on(h,f.start),m},l}(t);i.oncreate=function(e){var n,r=e.options,i=r._,s=r.url,a=r.oniframeload;if(s&&(this.padding=r.padding=0,n=t("<iframe />"),n.attr({src:s,name:e.id,width:"100%",height:"100%",allowtransparency:"yes",frameborder:"no",scrolling:"no"}).on("load",function(){var t;try{t=n[0].contentWindow.frameElement}catch(t){}t&&(r.width||e.width(n.contents().width()),r.height||e.height(n.contents().height())),a&&a.call(e)}),e.addEventListener("beforeremove",function(){n.attr("src","about:blank").remove()},!1),e.content(n[0]),e.iframeNode=n[0]),!(i instanceof Object)){for(var u=function(){e.close().remove()},c=0;c<frames.length;c++){try{if(i instanceof frames[c].Object){t(frames[c]).one("unload",u);break}}catch(t){}}}t(e.node).on(o.types.start,"[i=title]",function(t){e.follow||(e.focus(),o.create(e.node,t))})},i.get=function(t){if(t&&t.frameElement){var e,n=t.frameElement,r=i.list;for(var o in r){if(e=r[o],e.node.getElementsByTagName("iframe")[0]===n){return e}}}else{if(t){return i.list[t]}}},window.ry_dialog=i;var s=i,a="d-loading-bar";return{dialog:s,msg:function(t,n){e(t,n,"msg-info")},success:function(t,n){e(t,n,"msg-success")},error:function(t,n){e(t,n,"msg-error")},loading:{show:function(t){var e=s({skin:"ui-loading",id:a,content:t});return e.showModal(),e},hide:function(){s.get(a).remove()}}}}),define("app/common/class",[],function(){function t(e){if(!(this instanceof t)&&u(e)){return n(e)}}function e(e){var n,r;for(n in e){r=e[n],t.Mutators.hasOwnProperty(n)?t.Mutators[n].call(this,r):this.prototype[n]=r}}function n(n){return n.extend=t.extend,n.implement=e,n}function r(){}function i(t,e,n){for(var r in e){if(e.hasOwnProperty(r)){if(n&&c(n,r)===-1){continue}"prototype"!==r&&(t[r]=e[r])}}}t.create=function(r,o){function s(){r.apply(this,arguments),this.constructor===s&&this.initialize&&this.initialize.apply(this,arguments)}return u(r)||(o=r,r=null),o||(o={}),r||(r=o.Extends||t),o.Extends=r,r!==t&&i(s,r,r.StaticsWhiteList),e.call(s,o),n(s)},t.extend=function(e){return e||(e={}),e.Extends=this,t.create(e)},t.Mutators={Extends:function(t){var e=this.prototype,n=o(t.prototype);i(n,e),n.constructor=this,this.prototype=n,this.superclass=t.prototype},Implements:function(t){a(t)||(t=[t]);for(var e,n=this.prototype;e=t.shift();){i(n,e.prototype||e)}},Statics:function(t){i(this,t)}};var o=Object.__proto__?function(t){return{__proto__:t}}:function(t){return r.prototype=t,new r()},s=Object.prototype.toString,a=Array.isArray||function(t){return"[object Array]"===s.call(t)},u=function(t){return"[object Function]"===s.call(t)},c=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,r=t.length;n<r;n++){if(t[n]===e){return n}}return -1};return t}),define("app/common/utils",["jquery","dialog"],function(t,e){function n(t,e){var n;if(null==t||"--"==t||0==t.length){return"--"}"/Date"==t.substring(0,5)?(t=t.replace("/Date(","").replace(")/",""),t.indexOf("+")>0?t=t.substring(0,t.indexOf("+")):t.indexOf("-")>0&&(t=t.substring(0,t.indexOf("-"))),n=new Date(parseInt(t,10))):n=new Date(t);var r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,i=n.getDate()<10?"0"+n.getDate():n.getDate(),o=n.getHours()+e-8;o=o<10?"0"+o:o;var s=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),a=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return n.getFullYear()+"-"+r+"-"+i+" "+o+":"+s+":"+a}var r={};return r.format=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})},r.dateFormat=function(t,e){return n(t,parseInt(e))},r.padleft=function(t,e){e=(e||8)-t.toString().length;for(var n="",r=0;r<e;r++){n+="0"}return n+t},r.combination=function(t,e){var n=[];return function t(e,r,i){if(0==i){return n.push(e)}for(var o=0,s=r.length;o<=s-i;o++){t(e.concat(r[o]),r.slice(o+1),i-1)}}([],t,e),n},r.ajax=function(n,r){var i={beforeSend:function(){e.loading.show(r)},complete:function(){e.loading.hide()}},o={type:"POST",contentType:"application/json",error:function(t){888==t.status&&(e.error(t.responseText),setTimeout(function(){location.href=t.getResponseHeader("Location")},2500))}};r&&(o=t.extend(!0,o,i));var s=t.extend(!0,o,n);return t.ajax(s)},r.secondsFormat=function(t,e){var n=Math.floor(parseInt(t/3600)/24),r=parseInt(t/3600)%24,i=parseInt(t/60)%60,o=t%60;return e?(r&&(i+=60*r),(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)):{days:n,hours:r<10?"0"+r:r,minutes:i<10?"0"+i:i,seconds:o<10?"0"+o:o}},r}),function(t,e){if("object"==typeof exports&&exports){e(exports)}else{var n={};e(n),"function"==typeof define&&define.amd?define("mustache",n):t.Mustache=n}}(this,function(t){function e(t,e){return d.call(t,e)}function n(t){return !e(p,t)}function r(t){return"function"==typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t){return String(t).replace(/[&<>"'\/]/g,function(t){return v[t]})}function s(t){if(!g(t)||2!==t.length){throw new Error("Invalid tags: "+t)}return[new RegExp(i(t[0])+"\\s*"),new RegExp("\\s*"+i(t[1]))]}function a(e,r){function o(){if(N&&!O){for(;j.length;){delete I[j.pop()]}}else{j=[]}N=!1,O=!1}r=r||t.tags,e=e||"","string"==typeof r&&(r=r.split(b));for(var a,f,h,d,p,m,g=s(r),v=new l(e),k=[],I=[],j=[],N=!1,O=!1;!v.eos();){if(a=v.pos,h=v.scanUntil(g[0])){for(var E=0,A=h.length;E<A;++E){d=h.charAt(E),n(d)?j.push(I.length):O=!0,I.push(["text",d,a,a+1]),a+=1,"\n"===d&&o()}}if(!v.scan(g[0])){break}if(N=!0,f=v.scan(x)||"name",v.scan(y),"="===f?(h=v.scanUntil(_),v.scan(_),v.scanUntil(g[1])):"{"===f?(h=v.scanUntil(new RegExp("\\s*"+i("}"+r[1]))),v.scan(w),v.scanUntil(g[1]),f="&"):h=v.scanUntil(g[1]),!v.scan(g[1])){throw new Error("Unclosed tag at "+v.pos)}if(p=[f,h,a,v.pos],I.push(p),"#"===f||"^"===f){k.push(p)}else{if("/"===f){if(m=k.pop(),!m){throw new Error('Unopened section "'+h+'" at '+a)}if(m[1]!==h){throw new Error('Unclosed section "'+m[1]+'" at '+a)}}else{"name"===f||"{"===f||"&"===f?O=!0:"="===f&&(g=s(r=h.split(b)))}}}if(m=k.pop()){throw new Error('Unclosed section "'+m[1]+'" at '+v.pos)}return c(u(I))}function u(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i){e=t[i],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e))}return r}function c(t){for(var e,n,r=[],i=r,o=[],s=0,a=t.length;s<a;++s){switch(e=t[s],e[0]){case"#":case"^":i.push(e),o.push(e),i=e[4]=[];break;case"/":n=o.pop(),n[5]=e[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(e)}}return r}function l(t){this.string=t,this.tail=t,this.pos=0}function f(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function h(){this.cache={}}var d=RegExp.prototype.test,p=/\S/,m=Object.prototype.toString,g=Array.isArray||function(t){return"[object Array]"===m.call(t)},v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},y=/\s*/,b=/\s+/,_=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(t){var e=this.tail.match(t);if(e&&0===e.index){var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},l.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case -1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},f.prototype.push=function(t){return new f(t,this)},f.prototype.lookup=function(t){var e;if(t in this.cache){e=this.cache[t]}else{for(var n=this;n;){if(t.indexOf(".")>0){e=n.view;for(var i=t.split("."),o=0;null!=e&&o<i.length;){e=e[i[o++]]}}else{e=n.view[t]}if(null!=e){break}n=n.parent}this.cache[t]=e}return r(e)&&(e=e.call(this.view)),e},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(t,e){var n=this.cache,r=n[t];return null==r&&(r=n[t]=a(t,e)),r},h.prototype.render=function(t,e,n){var r=this.parse(t),i=e instanceof f?e:new f(e);return this.renderTokens(r,i,n,t)},h.prototype.renderTokens=function(e,n,i,o){function s(t){return l.render(t,n,i)}for(var a,u,c="",l=this,f=0,h=e.length;f<h;++f){switch(a=e[f],a[0]){case"#":if(u=n.lookup(a[1]),!u){continue}if(g(u)){for(var d=0,p=u.length;d<p;++d){c+=this.renderTokens(a[4],n.push(u[d]),i,o)}}else{if("object"==typeof u||"string"==typeof u){c+=this.renderTokens(a[4],n.push(u),i,o)}else{if(r(u)){if("string"!=typeof o){throw new Error("Cannot use higher-order sections without the original template")}u=u.call(n.view,o.slice(a[3],a[5]),s),null!=u&&(c+=u)}else{c+=this.renderTokens(a[4],n,i,o)}}}break;case"^":u=n.lookup(a[1]),(!u||g(u)&&0===u.length)&&(c+=this.renderTokens(a[4],n,i,o));break;case">":if(!i){continue}u=r(i)?i(a[1]):i[a[1]],null!=u&&(c+=this.renderTokens(this.parse(u),n,i,u));break;case"&":u=n.lookup(a[1]),null!=u&&(c+=u);break;case"name":u=n.lookup(a[1]),null!=u&&(c+=t.escape(u));break;case"text":c+=a[1]}}return c},t.name="mustache.js",t.version="0.8.1",t.tags=["{{","}}"];var k=new h();t.clearCache=function(){return k.clearCache()},t.parse=function(t,e){return k.parse(t,e)},t.render=function(t,e,n){return k.render(t,e,n)},t.to_html=function(e,n,i,o){var s=t.render(e,n,i);return r(o)?void o(s):s},t.escape=o,t.Scanner=l,t.Context=f,t.Writer=h}),define("app/common/countdown",["jquery"],function(t){function e(t,e){var n=this;this.timerId=null,this._timer=t,this.timer=t,this.update=function(t){},this.done=function(){},this.start=function(){return null!=n.timerId&&clearInterval(n.timerId),n.timerId=setInterval(function(){--n.timer,n.timer>=0?n.update.call(n,n.timer):(n.done.call(n),n.stop())},1000),n},this.stop=function(){return clearInterval(n.timerId),n.timerId=null,n},this.restart=function(){n.start(),n.timer=n._timer}}return e}),define("app/common/sound",["app/common/utils"],function(t){function e(t){return window.document[t]?window.document[t]:navigator.appName.indexOf("Microsoft Internet")!=-1?document.getElementById(t):document.embeds&&document.embeds[t]?document.embeds[t]:void 0}function n(t){var n=e("asound");return !n?!1:!n.hasOwnProperty("SetVariable")?(!window.asaudio&&(window.asaudio=document.createElement("audio")),n=window.asaudio,!(!n.canPlayType||!n.canPlayType("audio/mpeg"))&&(n.pause(),n.src=t,n.play(),!0)):(n.SetVariable("f",t),n.GotoFrame(1),!0)}function r(){return n("not-exist.mp3")}function i(){for(var t=navigator.userAgent,e=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),n=!0,r=0;r<e.length;r++){if(t.indexOf(e[r])>0){n=!1;break}}return n}window.asplay=n,window.asstop=r;var o=ry_lottery_config;return{play:function(e){if(i()){return e=e||"open",n(t.format(o.assets,t.format("other/{0}.mp3",e)))}}}}),define("app/common/lang",[],function(){var t=ry_lottery_config,e=t.locale,n={dialog:{ok:"确定",cancel:"取消",close:"关闭"},msg:{empty:"请选择一个玩法",limit:"只能选择{0}个号码",maxGroup:"最多只能选择{0}组",minGroup:"最少选择{0}组",emptyAmount:"请输入下注金额",minNumbers:"最少选择{0}个号码",preIssueClosed:"{0}正在开奖<br />{1}正在投注",issue:"期",closedGate:"已封盘",errorNumber:"号码信息有误",sameNumbers:"不能包含相同的号码",notice:"公告",tips:"温馨提示",notLogin:"请先登录网站"},date:{days:"天",hours:"小时",minutes:"分钟",seconds:"秒"},bet:{success:"下注成功",unknownError:"未知错误",linesUpdated:"赔率发生变化",loading:"正在保存中...",orders:"下注清单",notEnoughBalance:"投注金额超过余额"}},r={dialog:{ok:"確定",cancel:"取消",close:"關閉"},msg:{empty:"請選擇壹個玩法",limit:"只能選擇{0}個號碼",maxGroup:"最多只能選擇{0}組",minGroup:"最少選擇{0}組",emptyAmount:"請輸入下註金額",minNumbers:"最少選擇{0}個號碼",preIssueClosed:"{0}正在開獎<br />{1}正在投註",issue:"期",closedGate:"已封盤",notice:"公告",tips:"溫馨提示",errorNumber:"號碼信息有誤",sameNumbers:"不能包含相同的號碼",notLogin:"請先登錄網站"},date:{days:"天",hours:"小時",minutes:"分鐘",seconds:"秒"},bet:{success:"下註成功",unknownError:"未知錯誤",linesUpdated:"賠率發生變化",loading:"正在保存中...",orders:"下註清單",notEnoughBalance:"投注金額超出餘額"}},i={dialog:{ok:"Ok",cancel:"Cancel",close:"Close"},msg:{empty:"Please choose for betting",limit:"Can only choose {0} numbers",maxGroup:"Can only choose {0} groups",minGroup:"Select at least {0} groups",emptyAmount:"Please enter betting amount",notice:"Notice",tips:"Tips",minNumbers:"Select at least {0} numbers",preIssueClosed:"{0} is closed,<br />{1} is already open",issue:"Issue",closedGate:"Closed",errorNumber:"Number info error",sameNumbers:"Can not include same numbers",notLogin:"Please login"},date:{days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},bet:{success:"Success !",unknownError:"Unknown error !",linesUpdated:"Lines updated ",loading:"Loading...",orders:"Order list",notEnoughBalance:"Balance Not Enough"}},o={zh_cn:n,zh_tw:r,en:i};return o[e]}),define("app/common/tabs",["jquery"],function(t){return t.fn.extend({tab:function(e){var n={autoPlay:!0,current:0,mouseover:!1,className:{bd:".tab-bd",hd:".tab-hd",item:".tab-item",active:"active"},speed:0,delay:400,selected:function(t,e){}};return this.each(function(){function r(e,n){s.removeClass(o.className.active),t(e).addClass(o.className.active);var r=s.index(e);a.eq(r).show(o.speed).siblings(o.className.bd).hide(),o.selected.call(e,n,a.eq(r),r)}e&&(o=t.extend(n,e));var i=t(this),o=n,s=i.find(o.className.hd).find(o.className.item),a=i.find(o.className.bd);n.mouseover?(s.on("mouseenter",function(t){r(this,t)}),s.eq(n.current).trigger("mouseenter")):(s.on("click",function(t){return r(this,t),!1}),s.eq(n.current).trigger("click"))})}}),t}),define("app/common/marquee",["jquery"],function(t){return function(t){t.fn.marquee=function(e){function n(t,e,n){var r=n.behavior,i=n.width,o=n.dir,s=0;return s="alternate"==r?1==t?e[n.widthAxis]-2*i:i:"slide"==r?t==-1?o==-1?e[n.widthAxis]:i:o==-1?e[n.widthAxis]-2*i:0:t==-1?e[n.widthAxis]:0}function r(){for(var e=o.length,s=null,a=null,u={},c=[],l=!1;e--;){s=o[e],a=t(s),u=a.data("marqueeState"),a.data("paused")!==!0?(s[u.axis]+=u.scrollamount*u.dir,l=u.dir==-1?s[u.axis]<=n(u.dir*-1,s,u):s[u.axis]>=n(u.dir*-1,s,u),"scroll"==u.behavior&&u.last==s[u.axis]||"alternate"==u.behavior&&l&&u.last!=-1||"slide"==u.behavior&&l&&u.last!=-1?("alternate"==u.behavior&&(u.dir*=-1),u.last=-1,a.trigger("stop"),u.loops--,0===u.loops?("slide"!=u.behavior?s[u.axis]=n(u.dir,s,u):s[u.axis]=n(u.dir*-1,s,u),a.trigger("end")):(c.push(s),a.trigger("start"),s[u.axis]=n(u.dir,s,u))):c.push(s),u.last=s[u.axis],a.data("marqueeState",u)):c.push(s)}o=c,o.length&&setTimeout(r,i.speed)}var i={kclass:"",speed:30};t.extend(i,e);var o=[],s=this.length;return this.each(function(e){var a=t(this),u=a.attr("width")||a.width(),c=a.attr("height")||a.height(),l=a.after("<div "+(i.kclass?'class="'+i.kclass+'" ':"")+'style=" width: '+u+"px; height: "+c+'px; overflow: hidden;"><div style="float: left;">'+a.html()+"</div></div>").next(),f=l.get(0),h=(a.attr("direction")||"left").toLowerCase(),d={dir:/down|right/.test(h)?-1:1,axis:/left|right/.test(h)?"scrollLeft":"scrollTop",widthAxis:/left|right/.test(h)?"scrollWidth":"scrollHeight",last:-1,loops:a.attr("loop")||-1,scrollamount:a.attr("scrollamount")||this.scrollAmount||2,behavior:(a.attr("behavior")||"scroll").toLowerCase(),width:/left|right/.test(h)?u:c};a.attr("loop")==-1&&"slide"==d.behavior&&(d.loops=1),a.remove(),/left|right/.test(h)?l.find("> div").css({padding:"0 "+u+"px","white-space":"nowrap"}):l.find("> div").css({padding:c+"px 0"}),l.bind("stop",function(){l.data("paused",!0)}).bind("pause",function(){l.data("paused",!0)}).bind("start",function(){l.data("paused",!1)}).bind("unpause",function(){l.data("paused",!1)}).data("marqueeState",d),o.push(f),f[d.axis]=n(d.dir,f,d),l.trigger("start"),e+1==s&&r()}),t(o)}}(t),t}),function(t){"function"==typeof define&&define.amd?define("cookie",["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(t){return a.raw?t:encodeURIComponent(t)}function n(t){return a.raw?t:decodeURIComponent(t)}function r(t){return e(a.json?JSON.stringify(t):String(t))}function i(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(s," ")),a.json?JSON.parse(t):t}catch(t){}}function o(e,n){var r=a.raw?e:i(e);return t.isFunction(n)?n(r):r}var s=/\+/g,a=t.cookie=function(i,s,u){if(void 0!==s&&!t.isFunction(s)){if(u=t.extend({},a.defaults,u),"number"==typeof u.expires){var c=u.expires,l=u.expires=new Date();l.setTime(+l+86400000*c)}return document.cookie=[e(i),"=",r(s),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}for(var f=i?void 0:{},h=document.cookie?document.cookie.split("; "):[],d=0,p=h.length;d<p;d++){var m=h[d].split("="),g=n(m.shift()),v=m.join("=");if(i&&i===g){f=o(v,s);break}i||void 0===(v=o(v))||(f[g]=v)}return f};a.defaults={},t.removeCookie=function(e,n){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},n,{expires:-1})),!t.cookie(e))}}),define("app/common/lottery",["jquery","underscore","dialog","app/common/class","app/common/utils","mustache","app/common/countdown","app/common/sound","app/common/lang","app/common/tabs","app/common/marquee","cookie"],function(t,e,n,r,i,o,s,a,u){var c,l=20;return t.cookie.json=!0,e.templateSettings={interpolate:/\{\{(.+?)\}\}/g},c=r.create({$:t,utils:i,_:e,ui:n,tpl:o,CountDown:s,cfg:ry_lottery_config,lang:u,initialize:function(e){var r=this;n.dialog.defaults=t.extend(!0,n.dialog.defaults,{okValue:u.dialog.ok,cancelValue:u.dialog.cancel}),this.options=t.extend(!0,{hln:!1,filter:!0,lotteryId:1,BetType:1,IsTeMa:!1,IsForNumber:!1,category:"",cookieKey:"hfc_QuickMode"},e),this.lotteryId=this.options.lotteryId,this.isOpen=!0,this.isLogin=!0,this.isQuickMode=!0,this.setQuickMode(),this.refreshDuration=15,this.amount=0,this.data=[],this.records=[],this.betInfo=null,this.$doc=t(document),this.$play=t("#play"),this.PrePeriodNumber=null,this.PrePeriodText=null,this.checkPrePeriod=!1,this.isSoundOn=!0,this.isBetting=!1,this.balance=0,this.betTotal=0;var i=this.options.filter;if(i){var o="string"===t.type(i)?i:".input";this.filter(o)}t(function(){r.$doc.off("click",".bet-button").on("click",".bet-button",function(e){e.preventDefault();var n=t(this).data("action");r[n]&&r[n]()}),r.marquee(),r.setHotIcon(),r.openNavDialog(),r.soundOnOff()})},soundOnOff:function(){var e=this,n=t.cookie("soundAbility"),r=t.cookie("soundSwitch");n||(n=a.play(),t.cookie("soundAbility",n,{expires:365,path:"/"})),n?(null!=r&&(e.isSoundOn=!!parseInt(r),r||t(".sound-on").addClass("sound-stop")),t(".sound-on").click(function(){t(this).toggleClass("sound-stop"),e.isSoundOn=!e.isSoundOn,t.cookie("soundSwitch",e.isSoundOn?1:0,{expires:365,path:"/"})})):t(".sound-on").addClass("sound-stop")},setHotIcon:function(){var i=t(".icon-hot"),c=i.size()>0&&setInterval(function(){i.toggleClass("hide")},250)},onChangeIssue:function(){var e=this,f=t("#current-issue");setInterval(function(){var g=!f.attr("title")?f.text():f.attr("title"),h=n.dialog({title:u.msg.tips,content:i.format(u.msg.preIssueClosed,e.PrePeriodText,g),ok:function(){}});if(e.PrePeriodText!=""&&g!=""&&e.PrePeriodText!=g&&e.PrePeriodText.length==g.length){h.showModal();setTimeout(function(){h.remove()},5000)}e.PrePeriodText=g},250)},getNotice:function(){return i.ajax({url:"ajax.php?action=notice",success:function(e){var r=e.Obj;if(r.length>0){for(var i=0;i<r.length;i++){var o=t.cookie("lotteryNoticeIdList");null!=o&&t.inArray(r[i].ID.toString(),o.split(","))>-1||n.dialog({id:i+1,title:u.msg.notice,width:400,height:100,content:r[i].Content,ok:function(){var e=this.id-1,n=t.cookie("lotteryNoticeIdList");null!=n?n+=","+r[e].ID:n=r[e].ID.toString(),t.cookie("lotteryNoticeIdList",n,{path:"/",expires:365})}}).showModal()}}}}),t.get("ajax.php?action=syspars")},onAuthFail:function(){!this.isLianMa&&t(".need-auth").map(function(){t(this).is("form")?t(this).parent().addClass("hide"):t(this).addClass("hide")})},onAuthSuccess:function(){!this.isLianMa&&t(".need-auth").map(function(){t(this).is("form")?t(this).parent().removeClass("hide"):t(this).removeClass("hide")})},refresh:function(){var f=this,g=t("#current-issue");this.getBetInfo().done(function(e){e.Success?(f.afterRefresh(e.Obj),f.checkPrePeriod||(f.checkPrePeriod=!0,f.PrePeriodText=!g.attr("title")?g.text():g.attr("title"),f.onChangeIssue())):f.ui.msg(e.Msg)}).error(function(e){l>0&&setTimeout(function(){f.refresh(),l--},1000*f.refreshDuration)})},setQuickMode:function(e){var n=this.options.cookieKey;void 0!=e&&t.cookie(n,e,{expires:365,path:"/"}),this.isQuickMode=void 0==t.cookie(n)||t.cookie(n)},afterRefresh:function(t){},getPreBall:function(t){},getBetTotal:function(t){return t},reset:function(){var e=this;e.$doc.find(".input").val(""),e.data.length=0,e.records.length=0,e.amount=0,e.removeConfirmDialog()},valid:function(){return this.isLogin?this.data.length?!(this.isQuickMode&&!this.amount)||(n.msg(u.msg.emptyAmount),!1):(n.msg(u.msg.empty),!1):(n.msg(u.msg.notLogin),!1)},parlay:function(){var t=this;this.getData(),this.valid()&&this.openConfirmDialog(function(){t.isBetting=!0,t.bet(t.lotteryId,t.data).done(function(e){t.isBetting=!1,t.handlerResult(e)})})},beforeConfirm:function(){return !0},openConfirmDialog:function(f){var e=this,r="d-parlay-confirm",g=t("#current-issue");e.$confirmDialog=n.dialog({id:r,title:(!g.attr("title")?g.text():g.attr("title"))+u.bet.orders,content:e.getRecordsHtml(),ok:function(){if(parseInt(e.balance)<parseInt(e.betTotal)){n.msg(e.lang.bet.notEnoughBalance),e.betTotal=0}else{var r=this;if(!e.beforeConfirm()||e.isBetting){return !1}e.beforeBet(r),f&&f.call(r)}},cancel:function(){}}).showModal()},removeConfirmDialog:function(){this.$confirmDialog&&this.$confirmDialog.remove(),this.$confirmDialog=null},beforeBet:function(){},open:function(){this.isOpen=!0,this.$play.find("input,button").prop("disabled",!1),this.$play.removeClass("bet-closed")},close:function(){this.isOpen=!1,this.$play.find("input,button").prop("disabled",!0),this.$play.find(".input").val(""),this.removeConfirmDialog();var t=this.$play.addClass("bet-closed").find(".odds-text");t.find("[data-id]").length?t.find("[data-id]").text("-"):t.text("-"),this.$play.find(".table-current").removeClass("table-current")},bet:function(t,e){return i.ajax({url:"ajax.php",data:JSON.stringify({action:"bet",lotteryId:t,betParameters:e})},u.bet.loading)},getData:function(){var e=this;this.records=this.$doc.find(".input").map(function(n,r){var i,o,s,a=t(this),u=parseInt(a.attr("data-id"),10),c=a.attr("data-odds");if(o=t.trim(a.parent("td").prevAll(".table-odd").eq(0).text()),i=parseInt(t.trim(a.val()),10),s=e.options.category,u&&i&&!isNaN(i)){return{category:s,name:o,id:u,odds:c,amount:i.toFixed(2)}}}).get(),this.getPostData()},getPostData:function(){this.data=e.map(this.records,function(t,e){return{Id:t.id,BetContext:t.name,Lines:t.odds,BetType:this.options.BetType,Money:t.amount,IsTeMa:this.options.IsTeMa,IsForNumber:this.options.IsForNumber}},this)},getRecordsHtml:function(){var n,r=t("#j-confirm-tpl").html(),i=this.records.length,s=0;this.isQuickMode?s=this.amount*i:e.each(this.records,function(t){s+=parseFloat(t.amount)}),this.betTotal=this.getBetTotal(s);var a={col:i>6?"two-col":"",currency:this.cfg.currency,total:s,sum:i,items:this.records};return n=o.render(r,a)},afterGetBet:function(t){},getBetInfo:function(){var t=this;return i.ajax({url:"ajax.php",data:JSON.stringify({action:"info",lotteryId:this.lotteryId,numberPostion:t.NumberPostion||""}),success:function(e){t.afterGetBet(e);var r;e.Success?(t.betInfo=e.Obj,t.updateAmount(e),r=t.betInfo.PrePeriodNumber,null!=t.PrePeriodNumber&&t.PrePeriodNumber!=r&&t.isSoundOn&&a.play(),t.PrePeriodNumber=r):n.msg(e.Msg,2500),e.ExtendObj&&(t.isLogin=e.ExtendObj.IsLogin,!t.isLogin?t.onAuthFail():t.onAuthSuccess())},error:function(t){null!=t.responseJSON&&888==t.responseJSON.ErrorCode&&(window.location.href="stop.html")},timeout:3000})},onLinesUpdated:function(t){n.dialog({title:u.bet.linesUpdated,content:t,ok:function(){}}).showModal()},afterBet:function(t){e.delay(function(){location.reload()},2000)},listenAmount:function(){var e=this;this.$doc.on("change keyup blur",".fb",function(){var n=t(this).val();n&&e.isQuickMode?e.amount=parseInt(n,10):(e.amount=0,t(this).val(""))})},handlerResult:function(r){function s(){var n;if(n=e.isArray(c.records)?e.find(c.records,{id:h}):c.records,!n&&c.options.useCategoryAsName&&(n=c.records.length?c.records[0]:{},t.isArray(n)&&n.length?n=n[0]:n.category=c.options.category),c.options.useCategoryAsName&&(n.name=""),!n){return u.msg.errorNumber}var r=o.to_html("{{category}}{{name}}",{category:n.category,name:n.name?"["+n.name+"]":""});return f=i.format(f,r)}var c=this;if(r){var l=r.result,f=r.msg,h=r.errId;if(9===l){return void this.onLinesUpdated(s())}var d="fail";switch(l){case 1:d="ok",f=u.bet.success,this.afterBet(f);break;case 4:case 5:case 6:case 10:s()}c.isSoundOn&&a.play(d),n.msg(f,2500)}else{c.isSoundOn&&a.play("fail"),n.error(u.bet.unknownError)}},filter:function(e){function n(t){i.length&&(i.val(t),r.amount=t)}var r=this,i=t(".sync-bet");this.$doc.on("keyup blur",e,function(){var e=t(this),i=t.trim(e.val()),o=parseInt(i,10),s=99999999,a=e.data("max");a&&(a=parseInt(a,10),s=a),!isNaN(o)&&o>0&&o<=s?(e.val(o),r.isQuickMode&&n(o)):(e.val(""),n(""))})},updateAmount:function(e){function n(e,n){r.balance=e,t("#j-balance").text(i+e),t("#j-orders").text(i+n)}var r=this,i=r.cfg.currency;e?(e=e.Obj,n(e.Balance,e.NotCountSum)):r.utils.ajax({url:"ajax.php",data:JSON.stringify({action:"info",type:"balance",lotteryId:r.lotteryId}),success:function(e){var i=e.Obj;e.Success&&(e=e.Obj,n(e.Balance,e.NotCountSum),t("#win-lose").text(e.WinLoss),r.getPreBall(i))}})},marquee:function(){var e;this.getNotice().done(function(n){var r="";n&&n.Success&&(n=n.Obj,n.notice&&n.notice.length&&(e=n,r=o.render('{{#notice}}<span class="j-show-more-notice">{{Content}}</span>{{/notice}}',n),t("#marquee").before('<i class="icon notify-icon"></i>').html(r).marquee({kclass:"marquee",speed:50}).mouseover(function(){t(this).trigger("stop")}).mouseout(function(){t(this).trigger("start")})))}),this.$doc.on("click",".j-show-more-notice",function(e){e.preventDefault();t(this).attr("data-id")})},openNavDialog:function(){this.$doc.on("click",".odfi",function(e){e.preventDefault();var r=t(this).data("href"),i=this.title,o=t(this).data("height"),s=n.dialog({id:"d-account-info",title:i,width:"820px",height:o||350,content:'<iframe src="'+r+'" frameborder="0" width="100%" height="100%" allowtransparency="yes" style="position:relative"></iframe>'});s.showModal()})}})});